const REGEX_DEFAULT="item>\\s*<title>(?<name>.+?)</title>[\\s\\S]*?<link>(?:<!\\[CDATA\\[)?(?<link>.+?)(?:\\]\\]>)?<[\\s\\S]+?pubDate>(?<date>.+?)<[\\s\\S]+?(?<desc><description>[\\s\\S]+?</description>)";var quickLinksURLs=[];function readFile(e,t,n){var a=new XMLHttpRequest;a.overrideMimeType(t),a.open("GET",e,!0),a.onload=function(){4===a.readyState&&"200"==a.status&&n(a)},a.send(null)}function loadFeeds(e,t,n,a){var[o,r,d]=t,d=d||"",s=document.createElement.bind(document),l=s("details");l.appendChild(s("summary")).appendChild(document.createTextNode(e));var c=function(e){r||(r=REGEX_DEFAULT);for(var t,i,o,c,m,p=e.responseText.matchAll(new RegExp(r,"g")),u=new DOMParser,h=s("ul"),f=0,v=!1;!(o=p.next()).done&&f++<30;)c=o.value.groups,(t=h.appendChild(s("li")).appendChild(s("a"))).className="tooltipBox",t.href=u.parseFromString(d+c.link,"text/html").documentElement.textContent,t.appendChild(document.createTextNode(u.parseFromString(c.name,"text/html").documentElement.textContent)),(i=t.appendChild(s("textarea"))).className="tooltipText",i.setAttribute("readonly","true"),i.appendChild(document.createTextNode(c.date)),c.desc&&(m=u.parseFromString(c.desc,"text/html"),m=u.parseFromString(m.documentElement.textContent.trim(),"text/html"),i.appendChild(document.createTextNode("\n\n"+m.documentElement.textContent))),(!a||new Date(c.date)>=a)&&(t.style.color="cyan",v=!0);v&&(l.appendChild(h),n.appendChild(l))};if(Array.isArray(o))for(i=0;i<o.length;i++)readFile(o[i],"text/xml",c);else readFile(o,"text/xml",c)}function fetchFavicon(e,t=!1){return t&&(e=e.slice(0,e.slice(8).indexOf("/")+9)),"https://www.google.com/s2/favicons?domain="+e}function appendToQuickLinks(e){for(var t=document.getElementById("quick-links"),n=0;n<e.length;n++){var a=document.createElement("div");a.className="bookmark";var i=a.appendChild(document.createElement("a"));i.href=e[n].url;var o=new Image;o.src=e[n].favIconUrl,i.insertAdjacentElement("afterbegin",o),t.appendChild(a),quickLinksURLs.push(e[n].url)}}function appendListToSidebar(e,t=!0){var n=document.createElement.bind(document),a=document.getElementById("sidebar"),i=n("ul");nQuickLinks=quickLinksURLs.length;for(var o=0;o<e.length;o++){var r=e[o].hasOwnProperty("tab")?e[o].tab:e[o];if(r.hasOwnProperty("url")&&!r.url.startsWith("edge://")){for(var d=r.url.includes.bind(r.url),s=0;s<nQuickLinks;s++)d(quickLinksURLs[s]);var l=i.appendChild(n("li")).appendChild(n("a"));l.href=r.url,l.appendChild(document.createTextNode(r.title));var c=new Image;c.src=r.favIconUrl?r.favIconUrl:fetchFavicon(r.url,t),l.insertAdjacentElement("afterbegin",c)}}a.appendChild(i)}document.addEventListener("DOMContentLoaded",function(e){var t,n=document.getElementById.bind(document);window.location.origin.startsWith("chrome-extension://")?t="2":window.location.origin.startsWith("moz-extension://")&&(t="unfiled_____"),void 0!==t&&(chrome.sessions.getRecentlyClosed(appendListToSidebar),chrome.topSites.get(appendListToSidebar),chrome.bookmarks.getSubTree(t,function(e){appendListToSidebar(e[0].children.find(e=>"m"==e.title).children,!1)}));var a=document.getElementById("feeds"),i=function(e){var t=JSON.parse(e);appendToQuickLinks(t.quickLinks),linksArrayLen=t.slowLinks.length;for(let e=0;e<linksArrayLen;e++)appendListToSidebar(t.slowLinks[e],!1)},o=sessionStorage.getItem("staticLinks");o?i(o):readFile("links.json","application/json",e=>{responseText=e.responseText,sessionStorage.setItem("staticLinks",responseText),i(responseText)});var r=n("notepad");r.value=localStorage.getItem("notes");var d=function(){localStorage.setItem("notes",r.value)};n("btn-save-notes").addEventListener("click",d);var s=n("searchForm"),l=s.children[0];s.addEventListener("click",function(e){if(e.target.name){let n=e.target.name.split("&");for(var t=0;t<n.length-1;t++){let e=n[t].split("="),a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",e[0]),a.setAttribute("value",e[1]),s.appendChild(a)}l.name=n[t]}else l.name="q";s.target=e.ctrlKey?"_blank":"_self"});var c=n("sidebar");document.addEventListener("mousemove",e=>{if(e.altKey)return;let t=c.style.display,n=c.offsetWidth,a=window.innerWidth,i=e.clientX;c.style.display=e.clientY>5&&(a-i<20||t&&a-n-i<0)?"flex":"none"}),r.addEventListener("keydown",e=>{e.ctrlKey&&"s"==e.key&&(e.preventDefault(),d())}),l.focus()});